---
// Contact Form Component with Forminit Integration
---

<div class="contact-form-wrapper">
  <form id="contact-form" class="contact-form">
    <h3>Send us a Message</h3>

    <div class="form-row">
      <div class="form-group">
        <label for="firstName">First Name *</label>
        <input type="text" id="firstName" name="fi-sender-firstName" placeholder="First Name" required>
      </div>
      <div class="form-group">
        <label for="lastName">Last Name *</label>
        <input type="text" id="lastName" name="fi-sender-lastName" placeholder="Last Name" required>
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email Address *</label>
      <input type="email" id="email" name="fi-sender-email" placeholder="your@email.com" required>
    </div>

    <div class="form-group">
      <label for="subject">Subject *</label>
      <select id="subject" name="fi-select-subject" required>
        <option value="">Select a topic...</option>
        <option value="tickets">Tickets & Registration</option>
        <option value="group-bookings">Group Bookings</option>
        <option value="sponsorship">Sponsorship Inquiry</option>
        <option value="speaking">Speaker Inquiries</option>
        <option value="press">Press & Media</option>
        <option value="other">Other</option>
      </select>
    </div>

    <div class="form-group">
      <label for="message">Message *</label>
      <textarea id="message" name="fi-text-message" rows="5" placeholder="Your message..." required></textarea>
    </div>

    <input type="hidden" name="website_url" style="display:none !important" />

    <button type="submit" class="btn btn-primary btn-full">Send Message</button>

    <p id="form-result" class="form-status" aria-live="polite"></p>

    <p class="form-note">
      We typically respond within 24-48 hours on business days.
    </p>
  </form>
</div>

<script>
  const forminit = new Forminit();
  const FORM_ID = 'd90rfc8kn9k';
  
  const form = document.getElementById('contact-form');
  
  form.addEventListener('submit', async function(event) {
    event.preventDefault();
    
    const result = document.getElementById('form-result');
    const button = form.querySelector('button[type="submit"]');
    const originalButtonText = button.textContent;
    
    // Show sending state
    result.textContent = 'Sending...';
    result.className = 'form-status status-sending';
    button.disabled = true;
    button.textContent = 'Sending...';
    
    const formData = new FormData(form);
    const { data, redirectUrl, error } = await forminit.submit(FORM_ID, formData);
    
    button.disabled = false;
    button.textContent = originalButtonText;
    
    if (error) {
      result.textContent = error.message;
      result.className = 'form-status status-error';
      return;
    }
    
    result.textContent = 'Message sent successfully!';
    result.className = 'form-status status-success';
    form.reset();
    
    // Redirect to thank you page after 2 seconds
    setTimeout(() => {
      window.location.href = redirectUrl || '/thankyou';
    }, 2000);
  });
</script>

<style>
  .form-status {
    margin-top: 1rem;
    padding: 0.75rem;
    border-radius: var(--radius-md);
    font-size: 0.9rem;
    font-weight: 500;
    text-align: center;
  }

  .status-sending {
    background: var(--gray-100);
    color: var(--gray-700);
  }

  .status-success {
    background: rgba(0, 166, 81, 0.1);
    color: var(--eu-green);
    border: 1px solid var(--eu-green);
  }

  .status-error {
    background: rgba(220, 38, 38, 0.1);
    color: #dc2626;
    border: 1px solid #dc2626;
  }

  button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
</style>
